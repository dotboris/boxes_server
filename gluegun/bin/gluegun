#!/usr/bin/env ruby
$:.unshift File.expand_path('../../lib', __FILE__)

require 'boxes'
require 'gluegun/request'
require 'gluegun/request_queue'
require 'gluegun/request_handler'
require 'gluegun/drawing_queue'
require 'gluegun/collector'

puts 'GlueGun reporting in'

bunny = Boxes.bunny
bunny.start

queue = GlueGun::RequestQueue.new bunny

puts 'Waiting for requests'
queue.subscribe { |*args| GlueGun::RequestHandler.new(bunny).call *args }
