#!/usr/bin/env ruby
$:.unshift File.expand_path('../../lib', __FILE__)

require 'boxes'
require 'gluegun/request_queue'
require 'gluegun/request_handler'

puts 'GlueGun reporting in'

bunny = Boxes.bunny
bunny.start

queue = GlueGun::RequestQueue.new bunny
handler = GlueGun::RequestHandler.new bunny

puts 'Waiting for requests'
queue.subscribe { |*args| handler.call *args }
